<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Brazilian Auto Group</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0 !important;
      padding: 0 !important;
    }
    header {
      margin-top: 0 !important;
      padding-top: 0 !important;
    }
    .bg-brand-dark { background-color: #0a2713; }
    .bg-brand-green { background-color: #4CAF50; }
    .text-brand-green { color: #4CAF50; }
    .border-brand-green { border-color: #4CAF50; }
    .modal-bg { background: rgba(0,0,0,0.7); }
    .modal { z-index: 1000; }
    body { font-family: 'Montserrat', sans-serif; }
    .car-card { transition: all 0.3s ease; }
    .car-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
    .status-available { background-color: #76c043; color: white; }
    .status-sold { background-color: #dc3545; color: white; }
    .btn-primary-green { background-color: #76c043; color: white; transition: all 0.3s ease; }
    .btn-primary-green:hover { background-color: #9dd874; transform: translateY(-2px); }
    .text-primary-green { color: #76c043 !important; }
    .border-primary-dark { border-color: #0a2713 !important; }
    @media (max-width: 768px) {
      .car-card { min-width: 100%; }
      .hero-content { text-align: center; align-items: center; }
      .hero-buttons { flex-direction: column; gap: 0.7rem; }
      .header-menu { display: none; }
      .header-mobile { display: flex !important; }
      header img { height: 85px !important; max-height: 85px !important; }
      .mobile-logo { height: 110px !important; max-height: 110px !important; }
      .mobile-header-item { font-size: 0.85rem !important; padding: 0.5rem 1rem !important; }
      .header-mobile-phone { font-size: 1.1rem !important; margin-right: 0.3rem !important; margin-left: 0.2rem !important; }
      header nav { padding-top: 0.2rem !important; padding-bottom: 0.2rem !important; min-height: 56px !important; }
      .header-mobile i.fas.fa-phone { font-size: 1.1rem !important; }
      .header-mobile + a.bg-brand-green, .header-mobile + a { font-size: 0.85rem !important; padding: 0.5rem 1rem !important; }
      .mobile-menu { background: #fff !important; }
      .mobile-menu a { color: #0a2713 !important; font-size: 1rem !important; }
      .flex.items-center.space-x-4 > a, .flex.items-center.space-x-4 > button { font-size: 0.85rem !important; padding: 0.5rem 1rem !important; }
    }
    #carModal .close-modal-btn {
      position: fixed;
      top: 1.2rem;
      right: 1.2rem;
      z-index: 1050;
      background: rgba(255,255,255,0.95);
      border-radius: 9999px;
      padding: 0.4rem 0.7rem;
      font-size: 2rem;
      color: #333;
      border: none;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.12);
      transition: background 0.2s;
    }
    @media (max-width: 640px) {
      #carModal .close-modal-btn {
        top: 0.7rem;
        right: 0.7rem;
        font-size: 2.2rem;
        min-width: 48px;
        min-height: 48px;
      }
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

  <!-- HEADER -->
  <header class="shadow-lg bg-brand-dark relative">
    <nav class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <img src="https://page1.genspark.site/v1/base64_upload/d31efdedb1232115fd6ffa6c27cb9e5b" alt="Logo" class="h-24 md:h-24 sm:h-20 mobile-logo">
      </div>
      <div class="hidden md:flex space-x-10 header-menu justify-end flex-1 mr-12">
        <a href="#inventory" class="nav-link text-white font-medium hover:text-primary-green transition-colors">Inventory</a>
        <a href="#financing" class="nav-link text-white font-medium hover:text-primary-green transition-colors">Financing</a>
        <a href="#faq" class="nav-link text-white font-medium hover:text-primary-green transition-colors">FAQ</a>
        <a href="#contact" class="nav-link text-white font-medium hover:text-primary-green transition-colors">Contact</a>
      </div>
      <div class="flex items-center space-x-4">
        <a href="tel:+19733938674" class="text-white hover:text-primary-green transition-colors mobile-header-item">
          <i class="fas fa-phone mr-2 header-mobile-phone"></i>
          <span class="hidden md:inline">(973) 393-8674</span>
        </a>
        <a href="https://wa.me/19733938674" target="_blank" class="bg-brand-green text-white px-8 py-3 rounded-md font-medium shadow-lg text-lg hover:bg-green-600 transition-colors mobile-header-item" style="background:#76c043;color:#fff;">Contact Us</a>
      </div>
      <button class="md:hidden text-white focus:outline-none header-mobile" aria-label="Open menu">
        <i class="fas fa-bars text-xl"></i>
      </button>
    </nav>
    <!-- Menu Mobile -->
    <div class="md:hidden hidden mobile-menu bg-brand-dark w-full absolute left-0 z-50">
      <div class="container mx-auto px-4 py-4 flex flex-col gap-2">
        <a href="#inventory" class="block text-white py-2 hover:text-primary-green transition-colors mobile-link">Inventory</a>
        <a href="#financing" class="block text-white py-2 hover:text-primary-green transition-colors mobile-link">Financing</a>
        <a href="#faq" class="block text-white py-2 hover:text-primary-green transition-colors mobile-link">FAQ</a>
        <a href="#contact" class="block text-white py-2 hover:text-primary-green transition-colors mobile-link">Contact</a>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section class="py-20 text-white relative overflow-hidden" style="background: linear-gradient(120deg, #0a2e1a 60%, #76c043 100%);">
    <!-- Cars & Road Animation Background -->
    <div class="car-animation" style="position:absolute;top:0;left:0;width:100%;height:100%;z-index:1;opacity:0.18;pointer-events:none;">
      <div class="car car1"></div>
      <div class="car car2"></div>
      <div class="car car3"></div>
      <div class="road">
        <div class="line" style="left: 0%;"></div>
        <div class="line" style="left: 10%;"></div>
        <div class="line" style="left: 20%;"></div>
        <div class="line" style="left: 30%;"></div>
        <div class="line" style="left: 40%;"></div>
        <div class="line" style="left: 50%;"></div>
        <div class="line" style="left: 60%;"></div>
        <div class="line" style="left: 70%;"></div>
        <div class="line" style="left: 80%;"></div>
        <div class="line" style="left: 90%;"></div>
        <div class="line" style="left: 100%;"></div>
      </div>
    </div>
    <style>
      .car-animation .car {
        position: absolute;
        bottom: 30px;
        width: 120px;
        height: 40px;
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        opacity: 0.6;
        animation: driveCar 15s linear infinite;
      }
      .car-animation .car1 {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M5 13a2 2 0 0 1-2-2c0-1.1.9-2 2-2a2 2 0 0 1 2 2c0 1.1-.9 2-2 2zm14 0a2 2 0 0 1-2-2c0-1.1.9-2 2-2a2 2 0 0 1 2 2c0 1.1-.9 2-2 2zm-7-3.4L9 11.5V12h6v-.5l-3-1.9zM12 1C8.14 1 5 4.14 5 8v1h2V8c0-2.76 2.24-5 5-5s5 2.24 5 5v1h2V8c0-3.86-3.14-7-7-7zm.5 14.5c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5S10.17 13 11 13s1.5.67 1.5 1.5zm7.5-1.5H4v6h16v-6z'/%3E%3C/svg%3E");
        animation-delay: 0s;
      }
      .car-animation .car2 {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8l-2.08-5.99zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16zm11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zM5 11l1.5-4.5h11L19 11H5z'/%3E%3C/svg%3E");
        animation-delay: -7s;
      }
      .car-animation .car3 {
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23ffffff' viewBox='0 0 24 24'%3E%3Cpath d='M16 6l3 4h2c1.11 0 2 .89 2 2v3h-2c0 1.66-1.34 3-3 3s-3-1.34-3-3H9c0 1.66-1.34 3-3 3s-3-1.34-3-3H1v-3c0-1.11.89-2 2-2l3-4h10zm-10.5 1.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5zM18 13.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-12 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z'/%3E%3C/svg%3E");
        animation-delay: -3.5s;
      }
      @keyframes driveCar {
        0% { transform: translateX(-150px); }
        100% { transform: translateX(calc(100% + 150px)); }
      }
      .car-animation .road {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: rgba(255,255,255,0.05);
      }
      .car-animation .line {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        height: 5px;
        width: 50px;
        background: rgba(255,255,255,0.2);
        animation: moveLine 1s linear infinite;
      }
      @keyframes moveLine {
        0% { transform: translateY(-50%) translateX(0); }
        100% { transform: translateY(-50%) translateX(-100px); }
      }
    </style>
    <!-- Fim do background animado -->
    <div class="container mx-auto px-4 flex flex-col md:flex-row items-center hero-content relative z-10">
      <div class="max-w-3xl md:w-1/2">
        <h1 class="text-4xl md:text-5xl font-bold mb-6">Find Your Perfect Car with Easy Financing Options</h1>
        <p class="text-xl mb-8 opacity-90">Quality used cars with small down payments and in-house financing. Weekly payment plans available.</p>
        <div class="flex flex-wrap gap-4 hero-buttons">
          <a href="#inventory" class="bg-brand-green text-white px-8 py-3 rounded-md font-medium shadow-lg text-lg border-2 border-brand-green hover:bg-green-600 transition-colors">Browse Inventory</a>
          <a href="https://wa.me/19733938674" target="_blank" class="bg-brand-green text-white px-8 py-3 rounded-md font-medium shadow-lg text-lg hover:bg-green-600 transition-colors" style="background:#76c043;color:#fff;">Request Info</a>
        </div>
      </div>
      <div class="md:w-1/2 mt-10 md:mt-0 flex justify-center">
        <!-- Espaço para imagem ou ilustração, se quiser adicionar depois -->
      </div>
    </div>
  </section>

  <!-- FEATURED VEHICLES -->
  <section id="featured" class="py-16 bg-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12">Featured Vehicles</h2>
      <div id="featuredCars" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </div>
  </section>

  <!-- WHY CHOOSE -->
  <section id="why" class="py-16 bg-brand-dark text-white">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12">Why Choose Brazilian Auto Group?</h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
        <div>
          <div class="text-brand-green text-4xl mb-4"><i class="fas fa-car"></i></div>
          <h3 class="text-xl font-bold mb-3">Quality Vehicles</h3>
          <p>All our vehicles undergo a thorough professional inspection to ensure quality and reliability before being offered for sale.</p>
        </div>
        <div>
          <div class="text-brand-green text-4xl mb-4"><i class="fas fa-dollar-sign"></i></div>
          <h3 class="text-xl font-bold mb-3">Flexible Financing</h3>
          <p>No credit? No problem. We offer easy financing options tailored to immigrants with little or no credit history.</p>
        </div>
        <div>
          <div class="text-brand-green text-4xl mb-4"><i class="fas fa-handshake"></i></div>
          <h3 class="text-xl font-bold mb-3">Customer Service</h3>
          <p>Our multilingual staff provides personalized attention to help you find the perfect vehicle for your needs and budget.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FINANCING OPTIONS -->
  <section id="financing" class="py-16" style="background:#f7f8fa;">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-2">Financing Options</h2>
      <p class="text-gray-500 text-center mb-12 text-lg">Easy approvals with flexible payment options</p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
        <!-- In-House Financing -->
        <div class="bg-white rounded-xl shadow p-8 flex flex-col justify-between">
          <h3 class="text-xl font-bold mb-4">In-House Financing</h3>
          <ul class="space-y-4 mb-8">
            <li class="flex items-start"><i class="fas fa-check-circle text-primary-green mt-1 mr-3"></i>No credit check required - we finance everyone!</li>
            <li class="flex items-start"><i class="fas fa-check-circle text-primary-green mt-1 mr-3"></i>Small down payment options available</li>
            <li class="flex items-start"><i class="fas fa-check-circle text-primary-green mt-1 mr-3"></i>Weekly, bi-weekly or monthly payment plans</li>
            <li class="flex items-start"><i class="fas fa-check-circle text-primary-green mt-1 mr-3"></i>Flexible terms up to 48 months</li>
            <li class="flex items-start"><i class="fas fa-check-circle text-primary-green mt-1 mr-3"></i>Build credit history with on-time payments</li>
          </ul>
          <a href="https://wa.me/19733938674" target="_blank" class="bg-brand-green text-white px-8 py-3 rounded-md font-medium shadow-lg text-lg hover:bg-green-600 transition-colors block mt-4 hidden md:block" style="background:#76c043;color:#fff;">Contact Us</a>
        </div>
        <!-- What You'll Need -->
        <div class="bg-white rounded-xl shadow p-8 flex flex-col justify-between">
          <h3 class="text-xl font-bold mb-4">What You'll Need</h3>
          <ul class="space-y-4 mb-8">
            <li class="flex items-start"><i class="fas fa-id-card text-primary-green mt-1 mr-3"></i>Valid photo ID (driver's license, passport, or other government ID)</li>
            <li class="flex items-start"><i class="fas fa-file-invoice-dollar text-primary-green mt-1 mr-3"></i>Proof of income (pay stubs, bank statements, tax returns)</li>
            <li class="flex items-start"><i class="fas fa-home text-primary-green mt-1 mr-3"></i>Proof of residence (utility bill, lease agreement, bank statement)</li>
            <li class="flex items-start"><i class="fas fa-phone text-primary-green mt-1 mr-3"></i>Personal references (names and contact information)</li>
            <li class="flex items-start"><i class="fas fa-dollar-sign text-primary-green mt-1 mr-3"></i>Down payment (amount varies based on vehicle)</li>
          </ul>
          <p class="text-sm text-gray-400 italic mb-4">We work with various documentation situations. Contact us to discuss your specific case.</p>
          <a href="https://wa.me/19733938674" target="_blank" class="bg-brand-green text-white px-8 py-3 rounded-md font-medium shadow-lg text-lg hover:bg-green-600 transition-colors block md:hidden" style="background:#76c043;color:#fff;">Contact Us</a>
        </div>
      </div>
    </div>
  </section>

  <!-- INVENTORY -->
  <section id="inventory" class="py-16 bg-gray-100">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-12">Our Inventory</h2>
      <div id="carsList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
    </div>
  </section>

  <!-- MODAL DE DETALHES -->
  <div id="carModal" class="fixed inset-0 modal-bg flex items-center justify-center hidden" onclick="if(event.target.id==='carModal'){closeModal();}">
    <div class="modal bg-white rounded-lg shadow-lg max-w-3xl w-full p-8 relative" style="max-height:90vh;overflow-y:auto;">
      <button onclick="closeModal()" class="close-modal-btn"><i class="fas fa-times"></i></button>
      <div id="modalContent"></div>
    </div>
  </div>

  <!-- FAQ Section -->
  <section class="py-16" id="faq">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold mb-2 text-primary-dark text-center">Frequently Asked Questions</h2>
      <p class="text-gray-600 text-center mb-12">Answers to common questions about buying a car with us</p>
      <div class="max-w-3xl mx-auto space-y-6">
        <div class="bg-white p-6 rounded-lg shadow-custom faq-item">
          <div class="flex justify-between items-center cursor-pointer faq-question">
            <h3 class="font-bold text-lg text-primary-dark">What documents do I need to buy a car?</h3>
            <i class="fas fa-chevron-down text-primary-green"></i>
          </div>
          <div class="mt-4 text-gray-600 faq-answer" style="display:none;">
            <p>To purchase a car at Brazilian Auto Group, you'll typically need a valid photo ID (driver's license, passport, or government ID), proof of income, proof of residence, and a down payment. We work with various documentation situations, so please contact us to discuss your specific circumstances.</p>
          </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-custom faq-item">
          <div class="flex justify-between items-center cursor-pointer faq-question">
            <h3 class="font-bold text-lg text-primary-dark">Do you check credit scores?</h3>
            <i class="fas fa-chevron-down text-primary-green"></i>
          </div>
          <div class="mt-4 text-gray-600 faq-answer" style="display:none;">
            <p>No, our in-house financing program does not require traditional credit checks. We understand that many immigrants and newcomers don't have established credit in the US, so we base our financing decisions on your current income and ability to make payments.</p>
          </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-custom faq-item">
          <div class="flex justify-between items-center cursor-pointer faq-question">
            <h3 class="font-bold text-lg text-primary-dark">How much down payment do I need?</h3>
            <i class="fas fa-chevron-down text-primary-green"></i>
          </div>
          <div class="mt-4 text-gray-600 faq-answer" style="display:none;">
            <p>Down payment requirements vary based on the vehicle price and your financial situation. We offer flexible options with a low down payment for qualified buyers. The down payment affects your weekly/monthly payment amount, so a larger down payment will result in lower recurring payments.</p>
          </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-custom faq-item">
          <div class="flex justify-between items-center cursor-pointer faq-question">
            <h3 class="font-bold text-lg text-primary-dark">How do weekly payments work?</h3>
            <i class="fas fa-chevron-down text-primary-green"></i>
          </div>
          <div class="mt-4 text-gray-600 faq-answer" style="display:none;">
            <p>Our weekly payment option is designed to align with how many people get paid. You can choose to make payments in person at our location, via Zelle, or by bank transfer. Choose the option that works best for you. Weekly payments help keep the amounts smaller and more manageable within your budget.</p>
          </div>
        </div>
        <div class="bg-white p-6 rounded-lg shadow-custom faq-item">
          <div class="flex justify-between items-center cursor-pointer faq-question">
            <h3 class="font-bold text-lg text-primary-dark">Do you offer trade-ins?</h3>
            <i class="fas fa-chevron-down text-primary-green"></i>
          </div>
          <div class="mt-4 text-gray-600 faq-answer" style="display:none;">
            <p>Yes, we accept trade-ins and will offer you a fair market value for your current vehicle. The trade-in value can be applied toward your down payment on your new car purchase, potentially reducing or eliminating your out-of-pocket down payment.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="py-16 bg-white" id="contact">
    <div class="container mx-auto px-4 max-w-2xl">
      <h2 class="text-3xl font-bold mb-2 text-primary-dark text-center">Contact Our Team</h2>
      <p class="text-gray-600 text-center mb-8">Have questions? Ready to see a vehicle? Get in touch with our friendly team today.</p>
      <form id="contactForm" class="space-y-6 bg-white p-8 rounded-2xl shadow-lg border border-primary-dark">
        <div class="grid grid-cols-1 gap-6">
          <div>
            <label class="block mb-2 text-sm font-medium text-primary-dark">Name</label>
            <input type="text" name="name" required class="w-full px-4 py-3 rounded-md bg-gray-50 text-gray-800 border-2 border-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-primary-green" placeholder="Your Name">
          </div>
        </div>
        <div>
          <label class="block mb-2 text-sm font-medium text-primary-dark">Message</label>
          <textarea name="message" rows="4" required class="w-full px-4 py-3 rounded-md bg-gray-50 text-gray-800 border-2 border-primary-dark focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-primary-green" placeholder="How can we help you?"></textarea>
        </div>
        <div class="flex justify-center mt-6">
          <button type="submit" class="w-full md:w-auto bg-brand-green text-white font-bold py-3 px-8 rounded-md shadow transition text-lg hover:bg-green-700">Send Message</button>
        </div>
      </form>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="bg-brand-dark text-white py-10 mt-12">
    <div class="container mx-auto px-4 text-center">
      <img src="https://page1.genspark.site/v1/base64_upload/d31efdedb1232115fd6ffa6c27cb9e5b" alt="Logo" class="h-20 md:h-20 sm:h-16 mx-auto mb-4">
      <p class="text-gray-400 mb-4">Quality used vehicles with accessible financing options for everyone. Simple, transparent, and flexible car buying.</p>
      <div class="flex justify-center space-x-4">
        <!-- Ícones de redes sociais removidos -->
      </div>
      <hr class="border-gray-800 my-8">
      <p class="text-gray-400">&copy; 2025 Brazilian Auto Group. All rights reserved.</p>
    </div>
  </footer>

<script>
// Configuração dos endpoints
const REMOTE_API_URL = 'https://brazilian-auto-group.onrender.com/api/cars';

function formatPrice(price) {
  const num = Number(price);
  if (isNaN(num)) return 'N/A';
  return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(num);
}

function showError(container, message) {
  container.innerHTML = `
    <div class="text-center p-8">
      <i class="fas fa-exclamation-circle text-red-500 text-4xl mb-4"></i>
      <p class="text-gray-600">${message}</p>
      <p class="text-sm text-gray-500 mt-2">Por favor, tente novamente mais tarde ou entre em contato conosco.</p>
    </div>
  `;
}

// Carregar Featured e Inventory
async function loadCars() {
  try {
    const response = await fetch(REMOTE_API_URL);
    if (!response.ok) throw new Error('API não respondeu');
    const result = await response.json();
    const cars = result.data || [];

    // Featured (primeiros 3 disponíveis)
    const featured = cars.filter(c => c.status === 'available').slice(0, 3);
    const featuredContainer = document.getElementById('featuredCars');
    if (featuredContainer) {
      featuredContainer.innerHTML = '';
      featured.forEach(car => {
        const mainImage = car.images && car.images.length > 0 ? car.images[0] : '/images/no-image.png';
        featuredContainer.innerHTML += `
          <div class="car-card bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="relative">
              <img src="${mainImage}" alt="${car.brand} ${car.model}" class="w-full h-48 object-cover">
              ${car.status === 'available' ? '<span class="absolute top-2 right-2 bg-brand-green text-white px-3 py-1 rounded-full text-xs font-semibold shadow">Available</span>' : ''}
            </div>
            <div class="p-4">
              <h3 class="text-xl font-semibold mb-2">${car.brand} ${car.model}</h3>
              <div class="flex justify-between mb-4 text-gray-600">
                <span><i class="fas fa-car mr-1"></i> ${car.year}</span>
                <span><i class="fas fa-tachometer-alt mr-1"></i> ${car.mileage} mi</span>
                <span><i class="fas fa-gas-pump mr-1"></i> ${car.fuelType}</span>
              </div>
              <div class="mb-1">
                <span class="text-xl font-bold text-brand-green">CASH ${formatPrice(car.cashPrice)}</span>
              </div>
              <div class="mb-1">
                <span class="text-sm text-gray-500">Financed ${formatPrice(car.financedPrice)}</span>
              </div>
              <div class="mb-2">
                <span class="text-xs text-gray-400">VIN: ${car.vinNumber || 'N/A'}</span>
              </div>
              <button onclick="openModal('${car._id}')" class="mt-4 w-full bg-brand-green text-white py-2 rounded hover:bg-opacity-90 transition-colors">
                View Details
              </button>
            </div>
          </div>
        `;
      });
    }

    // Inventory (todos os carros)
    const inventoryContainer = document.getElementById('carsList');
    if (inventoryContainer) {
      inventoryContainer.innerHTML = '';
      cars.forEach(car => {
        const mainImage = car.images && car.images.length > 0 ? car.images[0] : '/images/no-image.png';
        inventoryContainer.innerHTML += `
          <div class="car-card bg-white rounded-lg shadow-lg overflow-hidden">
            <div class="relative">
              <img src="${mainImage}" alt="${car.brand} ${car.model}" class="w-full h-48 object-cover">
              ${car.status === 'available' ? '<span class="absolute top-2 right-2 bg-brand-green text-white px-3 py-1 rounded-full text-xs font-semibold shadow">Available</span>' : ''}
            </div>
            <div class="p-4">
              <h3 class="text-xl font-semibold mb-2">${car.brand} ${car.model}</h3>
              <div class="flex justify-between mb-4 text-gray-600">
                <span><i class="fas fa-car mr-1"></i> ${car.year}</span>
                <span><i class="fas fa-tachometer-alt mr-1"></i> ${car.mileage} mi</span>
                <span><i class="fas fa-gas-pump mr-1"></i> ${car.fuelType}</span>
              </div>
              <div class="mb-1">
                <span class="text-xl font-bold text-brand-green">CASH ${formatPrice(car.cashPrice)}</span>
              </div>
              <div class="mb-1">
                <span class="text-sm text-gray-500">Financed ${formatPrice(car.financedPrice)}</span>
              </div>
              <div class="mb-2">
                <span class="text-xs text-gray-400">VIN: ${car.vinNumber || 'N/A'}</span>
              </div>
              <button onclick="openModal('${car._id}')" class="mt-4 w-full bg-brand-green text-white py-2 rounded hover:bg-opacity-90 transition-colors">
                View Details
              </button>
            </div>
          </div>
        `;
      });
    }
  } catch (error) {
    console.error('Error loading cars:', error);
    const featuredContainer = document.getElementById('featuredCars');
    const inventoryContainer = document.getElementById('carsList');
    if (featuredContainer) {
      featuredContainer.innerHTML = '<p class="text-center text-red-500">Error loading featured cars. Please try again later.</p>';
    }
    if (inventoryContainer) {
      inventoryContainer.innerHTML = '<p class="text-center text-red-500">Error loading inventory. Please try again later.</p>';
    }
  }
}

// Função para abrir o modal com detalhes do carro
async function openModal(carId) {
  try {
    const response = await fetch(`${REMOTE_API_URL}/${carId}`);
    if (!response.ok) throw new Error('Car not found');
    const result = await response.json();
    const car = result.data || {};
    
    let imagesHtml = '';
    if (car.images && car.images.length > 0) {
      imagesHtml = `
        <div class="flex flex-col gap-4 md:w-1/2">
          <div class="w-full">
            <img src="${car.images[0]}" class="w-full rounded-lg shadow" style="max-height:350px;object-fit:cover;" id="mainModalImg">
          </div>
          <div class="flex gap-2 mt-2">
            ${car.images.map(img => `<img src="${img}" class="h-20 w-28 object-cover rounded cursor-pointer border-2 border-transparent hover:border-brand-green" onclick="document.getElementById('mainModalImg').src='${img}'">`).join('')}
          </div>
        </div>
      `;
    } else {
      imagesHtml = `<div class="md:w-1/2"><img src="/images/no-image.png" class="w-full rounded-lg shadow" style="max-height:350px;object-fit:cover;"></div>`;
    }

    let detailsHtml = `
      <div class="flex-1 flex flex-col justify-between">
        <div>
          <h2 class="text-3xl font-bold mb-2">${car.brand} ${car.model}</h2>
          <p class="text-lg text-gray-600 mb-4">${car.year} &bull; ${car.fuelType} &bull; ${car.mileage} mi</p>
          <div class="mb-1">
            <span class="text-xl font-bold text-brand-green">Cash Price: ${formatPrice(car.cashPrice)}</span>
          </div>
          <div class="mb-1">
            <span class="text-sm text-gray-500">Financed Price: ${formatPrice(car.financedPrice)}</span>
          </div>
          <div class="mb-2">
            <span class="text-xs text-gray-400">VIN: ${car.vinNumber || 'N/A'}</span>
          </div>
          <div class="mb-4">
            <span class="ml-2 text-gray-500">${car.status === 'available' ? 'Available' : 'Sold'}</span>
          </div>
          <p class="mb-4">${car.description || ''}</p>
          <a href="https://wa.me/19733938674?text=Hello! I'm interested in the ${encodeURIComponent(car.brand + ' ' + car.model)} I saw on your website." target="_blank" rel="noopener" class="inline-block mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-6 rounded-md shadow transition">
            <i class="fab fa-whatsapp mr-2"></i> Contact on WhatsApp
          </a>
        </div>
      </div>
    `;
    document.getElementById('modalContent').innerHTML = `<div class="flex flex-col md:flex-row gap-8">${imagesHtml}${detailsHtml}</div>`;
    document.getElementById('carModal').classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  } catch (error) {
    console.error('Error loading car details:', error);
    alert('Error loading car details. Please try again later.');
  }
}

function closeModal() {
  document.getElementById('carModal').classList.add('hidden');
  document.body.style.overflow = '';
}

// FAQ Accordion
const faqQuestions = document.querySelectorAll('.faq-question');
faqQuestions.forEach(q => {
  q.addEventListener('click', function() {
    const answer = this.parentElement.querySelector('.faq-answer');
    const icon = this.querySelector('i');
    if (answer.style.display === 'none' || answer.style.display === '') {
      answer.style.display = 'block';
      icon.classList.remove('fa-chevron-down');
      icon.classList.add('fa-chevron-up');
    } else {
      answer.style.display = 'none';
      icon.classList.remove('fa-chevron-up');
      icon.classList.add('fa-chevron-down');
    }
  });
});

// Substituir JS de envio de e-mail por redirecionamento para WhatsApp
const contactForm = document.getElementById('contactForm');
if (contactForm) {
  contactForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(contactForm);
    const name = formData.get('name');
    const message = formData.get('message');
    const text =
      `Name: ${name}%0AMessage: ${encodeURIComponent(message)}`;
    const phone = '19733938674';
    window.open(`https://wa.me/${phone}?text=${text}`, '_blank');
  });
}

// Seleciona o botão e o menu mobile
const mobileMenuBtn = document.querySelector('.header-mobile');
const mobileMenu = document.querySelector('.mobile-menu');

if (mobileMenuBtn && mobileMenu) {
  mobileMenuBtn.addEventListener('click', () => {
    mobileMenu.classList.toggle('hidden');
  });
  // Fecha o menu ao clicar em qualquer link
  mobileMenu.querySelectorAll('.mobile-link').forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu.classList.add('hidden');
    });
  });
}

document.addEventListener('DOMContentLoaded', loadCars);
</script>

</body>
</html>

